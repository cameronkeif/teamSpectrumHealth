@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div id="body">
    <ul id="shortages"></ul>
</div>

@section scripts{
<script type="text/javascript">
$(function()
{
        $.getJSON('/api/Shortage', function(shortagesJsonPayload)
        {
            $(shortagesJsonPayload).each(function(i, item)
            {
                $('#shortages').append('<div id="shortage' + item.Id+ '"><li>' + item.Id + " " + item.DrugId + " " + item.DateTime + " " + item.Status + ' <a href="/ShortagesList/Edit/' + item.Id + '"> Edit </a> <a onclick="DeleteConfirm(' + item.Id + ')" href="#"> Delete </a></li></div>');
            });
        });
});

function DeleteConfirm(id) {
    var result = confirm("Do you really want to delete this shortage?");
    if (result == true) {
        Delete(id);
    }
}

function Delete(id) {
    $.ajax({
        url: '/api/Shortage' + '/' + id,
        type: 'DELETE',
        success: function () {
            $('#shortage' + id).remove();
        },
    });
}
</script>
}